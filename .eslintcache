[{"/Users/michalbarski/Desktop/Work/Robill/client/src/index.js":"1","/Users/michalbarski/Desktop/Work/Robill/client/src/App.js":"2","/Users/michalbarski/Desktop/Work/Robill/client/src/constants/paths.js":"3","/Users/michalbarski/Desktop/Work/Robill/client/src/screens/Home.js":"4","/Users/michalbarski/Desktop/Work/Robill/client/src/screens/Login.js":"5","/Users/michalbarski/Desktop/Work/Robill/client/src/screens/Register.js":"6","/Users/michalbarski/Desktop/Work/Robill/client/src/components/NavBar.js":"7","/Users/michalbarski/Desktop/Work/Robill/client/src/components/Form.js":"8","/Users/michalbarski/Desktop/Work/Robill/client/src/providers/UserProvider.js":"9","/Users/michalbarski/Desktop/Work/Robill/client/src/firebase/index.js":"10","/Users/michalbarski/Desktop/Work/Robill/client/src/constants/db.js":"11","/Users/michalbarski/Desktop/Work/Robill/client/src/screens/Button.js":"12","/Users/michalbarski/Desktop/Work/Robill/client/src/services/referral.service.js":"13","/Users/michalbarski/Desktop/Work/Robill/client/src/hooks/useClicks.js":"14"},{"size":262,"mtime":1611690200624,"results":"15","hashOfConfig":"16"},{"size":1054,"mtime":1613030284713,"results":"17","hashOfConfig":"16"},{"size":164,"mtime":1613028878817,"results":"18","hashOfConfig":"16"},{"size":1947,"mtime":1613029965167,"results":"19","hashOfConfig":"16"},{"size":2237,"mtime":1612092768414,"results":"20","hashOfConfig":"16"},{"size":1575,"mtime":1612092835475,"results":"21","hashOfConfig":"16"},{"size":1511,"mtime":1613030261503,"results":"22","hashOfConfig":"16"},{"size":1348,"mtime":1612092795347,"results":"23","hashOfConfig":"16"},{"size":609,"mtime":1612878497614,"results":"24","hashOfConfig":"16"},{"size":1776,"mtime":1613029981803,"results":"25","hashOfConfig":"16"},{"size":166,"mtime":1612019430111,"results":"26","hashOfConfig":"16"},{"size":1669,"mtime":1613028918257,"results":"27","hashOfConfig":"16"},{"size":654,"mtime":1613030025449,"results":"28","hashOfConfig":"16"},{"size":437,"mtime":1612989727999,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"73a0hy",{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"32"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"32"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"32"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"52","usedDeprecatedRules":"32"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"32"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"32"},"/Users/michalbarski/Desktop/Work/Robill/client/src/index.js",[],["65","66"],"/Users/michalbarski/Desktop/Work/Robill/client/src/App.js",["67"],"/Users/michalbarski/Desktop/Work/Robill/client/src/constants/paths.js",[],"/Users/michalbarski/Desktop/Work/Robill/client/src/screens/Home.js",["68","69"],"import React, { useEffect, useContext, useState } from \"react\";\nimport { UserContext } from \"../providers/UserProvider\";\nimport { addEntry } from \"../firebase/index\";\nimport { getReferral } from \"../services/referral.service\";\nimport { useClicks } from \"../hooks/useClicks\";\nimport Login from \"./Login\";\n\nconst Home = () => {\n  const [open, setOpen] = useState(false);\n  const [fromUrl, setFromUrl] = useState(null);\n  const user = useContext(UserContext);\n  const [clicks, setClicks] = useClicks();\n\n  useEffect(() => {\n    if (user === undefined) setOpen(true);\n    else if (user) {\n      const url = getReturningUrl();\n      console.log(url);\n      if (url !== \"\") {\n        (async () => {\n          await addEntry(user.email, url);\n          window.location.href = url;\n        })();\n      }\n    }\n  }, [user]);\n\n  const getReturningUrl = () => {\n    const url = new URL(window.location);\n    const params = new URLSearchParams(url.search);\n    let from =\n      params.getAll(\"from\")[0] ||\n      document.referrer.split(\"?from=\")[1] ||\n      document.referrer;\n    from = getReferral(from, user.email);\n    setFromUrl(from);\n    return from;\n  };\n\n  return (\n    <div\n      className=\"ui segment\"\n      style={{\n        width: \"40%\",\n        margin: \"auto\",\n        textAlign: \"center\",\n        top: \"200px\",\n      }}\n    >\n      <>\n        {open ? (\n          <Login open={open} setOpen={setOpen} click={true} />\n        ) : (\n          <>\n            <h2>WELCOME</h2>\n            {fromUrl === \"\" && (\n              <strong style={{ color: \"red\" }}>Missing Referral</strong>\n            )}\n            <div>Number of Entries: {clicks}</div>\n            {!user && (\n              <button\n                className=\"ui red basic button\"\n                onClick={() => setOpen(true)}\n              >\n                Please sign in\n              </button>\n            )}\n          </>\n        )}\n      </>\n    </div>\n  );\n};\nexport default Home;\n","/Users/michalbarski/Desktop/Work/Robill/client/src/screens/Login.js",["70"],"import React, { useState, useContext } from \"react\";\nimport Form from \"../components/Form\";\nimport paths from \"../constants/paths\";\nimport { signInWithGoogle } from \"../firebase/index\";\nimport { UserContext } from \"../providers/UserProvider\";\nimport { Modal, Message } from \"semantic-ui-react\";\nimport { login } from \"../firebase/index\";\nimport Register from \"./Register\";\n\nconst Login = ({ open, setOpen, click }) => {\n  const [formData, setFormData] = useState({\n    password: \"\",\n    email: \"\",\n  });\n  const user = useContext(UserContext);\n  const [register, setRegister] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  if (user) window.location = paths.HOME;\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    if (formData.email === \"\" || formData.password === \"\") {\n      setError(\"All fields are required!\");\n      return;\n    }\n    e.preventDefault();\n    const res = await login(formData.email, formData.password);\n    setFormData({ email: \"\", password: \"\" });\n    setError(res);\n  };\n\n  const handleGoogleSubmit = (e) => {\n    signInWithGoogle();\n  };\n  return (\n    <>\n      {register ? (\n        <Register open={register} setOpen={setRegister} />\n      ) : (\n        <>\n          <Modal\n            onClose={() => setOpen(false)}\n            onOpen={() => setOpen(true)}\n            open={open}\n            style={{ width: \"50%\" }}\n          >\n            <Form\n              heading=\"Login\"\n              onChange={handleChange}\n              onSubmit={handleSubmit}\n              onGoogleSubmit={handleGoogleSubmit}\n              formData={formData}\n            />\n            <p style={{ textAlign: \"center\", paddingBottom: \"10px\" }}>\n              New user?{\" \"}\n              <a\n                style={{ cursor: \"pointer\" }}\n                onClick={() => setRegister(true)}\n              >\n                Sign up\n              </a>\n            </p>\n            {error !== \"\" && (\n              <Message negative>\n                <Message.Header>{error}</Message.Header>\n              </Message>\n            )}\n          </Modal>\n        </>\n      )}\n    </>\n  );\n};\nexport default Login;\n","/Users/michalbarski/Desktop/Work/Robill/client/src/screens/Register.js",["71"],"import React, { useState } from \"react\";\nimport Form from \"../components/Form\";\nimport { auth } from \"../firebase\";\nimport { Message, Modal } from \"semantic-ui-react\";\nimport { signInWithGoogle } from \"../firebase/index\";\n\nconst Register = ({ open, setOpen }) => {\n  const [formData, setFormData] = useState({\n    password: \"\",\n    email: \"\",\n  });\n  const [error, setError] = useState(\"\");\n\n  const handleChange = (e) => {\n    setError(\"\");\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (formData.email === \"\" || formData.password === \"\") {\n      setError(\"All fields are required!\");\n      return;\n    }\n    try {\n      const { user } = await auth.createUserWithEmailAndPassword(\n        formData.email,\n        formData.password\n      );\n    } catch (err) {\n      setError(err.message);\n    }\n  };\n\n  const handleGoogleSubmit = (e) => {\n    signInWithGoogle();\n  };\n  return (\n    <div>\n      <Modal\n        onClose={() => setOpen(false)}\n        onOpen={() => setOpen(true)}\n        open={open}\n        style={{ width: \"50%\" }}\n      >\n        <Form\n          heading=\"Register\"\n          onChange={handleChange}\n          onSubmit={handleSubmit}\n          onGoogleSubmit={handleGoogleSubmit}\n          formData={formData}\n          error={error}\n        />\n        {error !== \"\" && (\n          <Message negative>\n            <Message.Header>{error}</Message.Header>\n          </Message>\n        )}\n      </Modal>\n    </div>\n  );\n};\nexport default Register;\n","/Users/michalbarski/Desktop/Work/Robill/client/src/components/NavBar.js",["72"],"/Users/michalbarski/Desktop/Work/Robill/client/src/components/Form.js",[],"/Users/michalbarski/Desktop/Work/Robill/client/src/providers/UserProvider.js",["73","74","75"],"import React, { Component, createContext, useState, useEffect } from \"react\";\nimport { auth } from \"../firebase\";\n\nexport const UserContext = createContext({ user: null });\n\nconst UserProvider = ({ children }) => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    auth.onAuthStateChanged((userAuth) => {\n      if (userAuth === null) {\n        setUser(undefined);\n      } else {\n        setUser(userAuth);\n      }\n    });\n  }, []);\n\n  return <UserContext.Provider value={user}>{children}</UserContext.Provider>;\n};\nexport default UserProvider;\n","/Users/michalbarski/Desktop/Work/Robill/client/src/firebase/index.js",[],"/Users/michalbarski/Desktop/Work/Robill/client/src/constants/db.js",[],"/Users/michalbarski/Desktop/Work/Robill/client/src/screens/Button.js",["76","77","78"],"import React, { useContext, useEffect, useState, useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport paths from \"../constants/paths\";\nimport { UserContext } from \"../providers/UserProvider\";\nimport { addEntry } from \"../firebase/index\";\nimport { useClicks } from \"../hooks/useClicks\";\nimport { Loader } from \"semantic-ui-react\";\nimport Login from \"./Login\";\n\nconst Button = ({}) => {\n  const user = useContext(UserContext);\n  const history = useHistory();\n  const [clicks, setClicks] = useClicks();\n  const [loading, setLoading] = useState(false);\n  const [x, setX] = useState(1);\n  const [y, setY] = useState(2);\n  const [open, setOpen] = useState(false);\n\n  const handleClick = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setX(x + 1);\n    setY(y + 1);\n    if (!user) {\n      setLoading(false);\n      setOpen(true);\n    } else {\n      addEntry(user.email, x, y);\n      setClicks(clicks + 1);\n      history.push(`${paths.BUTTON}?x=${x}&y=${y}`);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div\n      className=\"ui segment\"\n      style={{\n        width: \"40%\",\n        margin: \"auto\",\n        textAlign: \"center\",\n        top: \"200px\",\n      }}\n    >\n      {loading ? (\n        <Loader active inline=\"centered\" />\n      ) : (\n        <>\n          {open ? (\n            <Login open={open} setOpen={setOpen} click={true} />\n          ) : (\n            <>\n              <h4>Number of clicks: {clicks}</h4>\n              <button onClick={handleClick} className=\"fluid ui button\">\n                Click me!\n              </button>\n            </>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\nexport default Button;\n","/Users/michalbarski/Desktop/Work/Robill/client/src/services/referral.service.js",[],"/Users/michalbarski/Desktop/Work/Robill/client/src/hooks/useClicks.js",["79"],"import { useEffect, useState, useCallback } from \"react\";\nimport { addEntry, getNumberOfClicks } from \"../firebase/index\";\n\nexport const useClicks = () => {\n  const [clicks, setClicks] = useState(\"\");\n\n  const fetchMyAPI = useCallback(async () => {\n    let response = await getNumberOfClicks();\n    setClicks(response.numberOfClicks);\n  }, []);\n\n  useEffect(() => {\n    fetchMyAPI();\n  }, [fetchMyAPI]);\n  return [clicks, setClicks];\n};\n",{"ruleId":"80","replacedBy":"81"},{"ruleId":"82","replacedBy":"83"},{"ruleId":"84","severity":1,"message":"85","line":1,"column":17,"nodeType":"86","messageId":"87","endLine":1,"endColumn":26},{"ruleId":"84","severity":1,"message":"88","line":12,"column":18,"nodeType":"86","messageId":"87","endLine":12,"endColumn":27},{"ruleId":"89","severity":1,"message":"90","line":26,"column":6,"nodeType":"91","endLine":26,"endColumn":12,"suggestions":"92"},{"ruleId":"93","severity":1,"message":"94","line":63,"column":15,"nodeType":"95","endLine":66,"endColumn":16},{"ruleId":"84","severity":1,"message":"96","line":29,"column":15,"nodeType":"86","messageId":"87","endLine":29,"endColumn":19},{"ruleId":"97","severity":1,"message":"98","line":8,"column":17,"nodeType":"99","messageId":"100","endLine":8,"endColumn":19},{"ruleId":"84","severity":1,"message":"101","line":1,"column":17,"nodeType":"86","messageId":"87","endLine":1,"endColumn":26},{"ruleId":"84","severity":1,"message":"102","line":8,"column":10,"nodeType":"86","messageId":"87","endLine":8,"endColumn":17},{"ruleId":"84","severity":1,"message":"103","line":8,"column":19,"nodeType":"86","messageId":"87","endLine":8,"endColumn":29},{"ruleId":"84","severity":1,"message":"85","line":1,"column":29,"nodeType":"86","messageId":"87","endLine":1,"endColumn":38},{"ruleId":"84","severity":1,"message":"104","line":1,"column":50,"nodeType":"86","messageId":"87","endLine":1,"endColumn":61},{"ruleId":"97","severity":1,"message":"98","line":10,"column":17,"nodeType":"99","messageId":"100","endLine":10,"endColumn":19},{"ruleId":"84","severity":1,"message":"105","line":2,"column":10,"nodeType":"86","messageId":"87","endLine":2,"endColumn":18},"no-native-reassign",["106"],"no-negated-in-lhs",["107"],"no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'setClicks' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getReturningUrl'. Either include it or remove the dependency array.","ArrayExpression",["108"],"jsx-a11y/anchor-is-valid","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement","'user' is assigned a value but never used.","no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","unexpected","'Component' is defined but never used.","'loading' is assigned a value but never used.","'setLoading' is assigned a value but never used.","'useCallback' is defined but never used.","'addEntry' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"109","fix":"110"},"Update the dependencies array to be: [getReturningUrl, user]",{"range":"111","text":"112"},[807,813],"[getReturningUrl, user]"]